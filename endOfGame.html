<!DOCTYPE html>
<head>
<title>Game Over Screen</title>
<link rel="icon" type="image/png" href="images/favicon.png">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="images/favicon.png">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link id="css" rel = "stylesheet" type = "text/css"  href = "css/styles.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script src="scripts/transitions.js"></script>
  <script src="scripts/audio.js"></script>
  <script src="scripts/sessionVariables.js"></script>
  
  <script>
	$(document).ready(function(){
	  // gets current wave number
	  var wave = getSessionItem("wave");
	  console.log('wave: ' +getSessionItem("wave"));
	  // gets the current score value
	  var score = getSessionItem("score");
	  // gets the player's name
	  var name = getSessionItem("name");
	  //gets player ID
	  var id = getSessionItem("id");
	  
	  // audio 
	  zWantBrains.play(); 
	  playerDie.play(); 

		//prints the wave number onto the top bar of the screen
		document.getElementById("wave").textContent=("Wave " + wave);
		//prints the wave number onto the top bar of the screen
		document.getElementById("score").textContent=("Score: " + score);
		
		$.ajax( { url: "https://api.mlab.com/api/1/databases/mathofthedead/collections/babysfirstdb?&apiKey=ArvUzWX9LKcVcKGcpfgPMVS62vXkF_Xu&f=" + JSON.stringify({"_id" : 0}),
			data: JSON.stringify( {"playerID": "not_used", "score": parseInt(score), "wave": parseInt(wave), "name": name } ),
			type: "post",
			contentType: "application/json; charset=utf-8",
		});
		removeSessionItem("wave");
		removeSessionItem("score");
	});
	
	//need to check which mode they are in
	var restart = "gameScreen.html";
	var leaderboard = "leaderboard.html";
	var menu = "mainMenu.html";
  </script>
  
  </head>
  <body>
	<div class="container special">
		<div class="row specialrow">
			<!--  Title for end of game  -->
			<div class="col-xs-12 youDiedTitle">YOU DIED</div>
			<!--  works with script to display wave number after player died   -->
            <div id="wave" class="col-xs-12 EOGWavedisplay"></div>
            <!--  works with script to display score after player dies  -->
			<div id="score" class="col-xs-12 EOGScoredisplay"></div>

			<!-- Beginning of buttons for end of game screen  -->
			<div class="col-xs-8 col-xs-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4 buttonHolder">
					<button type="button" class="btn btn-primary btn-lg sharp" onclick="fadeEnd(restart)" >Restart</button>
			</div>
			<div class="col-xs-8 col-xs-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4 buttonHolder">
					<button type="button" class="btn btn-primary btn-lg sharp" onclick="fadeEnd(leaderboard)">Leaderboard</button>
			</div>
			<div class="col-xs-8 col-xs-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4 buttonHolder">
				<button type="button" class="btn btn-primary btn-lg sharp" onclick="fadeEnd(menu)">Main Menu</button>
			</div>
			<!-- End of buttons for end of game screen  -->
		</div>
	</div>
</body>
</html>